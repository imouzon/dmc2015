class <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_class.txt")
class <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_class.txt", sep="|")
View(class)
train <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_train.txt", sep="|")
View(train)
str(train)
train[1,3]
train$categoryIDs1[1]
library(lubridate)
ymd_hms(train$orderTime[1])
ymd_hms(train$orderTime[1]) > ymd_hms(train$orderTime[2])
summary(train$basketValue)
ymd_hms(train$orderTime[1]) - ymd_hms(train$orderTime[2])
time_diff = ymd_hms(train$orderTime) - ymb_hms(train$orderTime)
time_diff = ymd_hms(train$orderTime) - ymd_hms(train$orderTime)
time_diff[1:2]
time_diff = ymd_hms(train$orderTime) - ymd_hms(train$couponsReceived)
mean(time_diff)
144725.4 / 60
144725.4 / 360
144725.4 / 3600
median(time_diff)
71264 / 3600
qplot(time_diff)
library(ggplot2)
qplot(time_diff)
qplot(time_diff, geom="histogram")
time_diff[1]
as.numeric(time_diff[1])
min_diff = as.numeric(time_diff) / 60
qplot(min_diff, geom="histogram")
qplot(min_diff, geom="histogram", colour=I("white"))
train$minute_diff <- min_diff
qplot(data=train, minute_diff, basketValue, geom="point")
library(dplyr)
train %>% subset(basketValue < 1000) %>%
ggplot(aes(x = minute_diff, y = basketValue)) + geom_point()
2500 / 8
head(train)
head(minute_diff)
sum(train$coupon1Used)
sum(train$coupon2Used)
sum(train$coupon3Used)
dim(train)
rm(list=ls())
train <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_train.txt", sep="|")
library(lubridate)
library(ggplot2)
library(dplyr)
time_diff = ymd_hms(train$orderTime) - ymd_hms(train$couponsReceived)
min_diff = as.numeric(time_diff) / 60
qplot(min_diff, geom="histogram", colour=I("white"))
train$minute_diff <- min_diff
train %>% subset(basketValue < 1000) %>%
ggplot(aes(x = minute_diff, y = basketValue)) + geom_point()
sum(train$coupon1Used)
sum(train$coupon2Used)
sum(train$coupon3Used)
summary(train$basketValue)
View(train)
names(train)
summary(train$basePrice1+train$reward1-train$price1)
rm(list=ls())
train <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_train.txt", sep="|")
train$orderTime <- ymd_hms(train$orderTime)
train$couponsReceived <- ymd_hms(train$couponsReceived)
train$time_diff = train$orderTime - train$couponsReceived
# create variable for difference in times (minutes)
train$minute_diff = as.numeric(train$time_diff) / 60
wday(train$orderTime)
wday(train$orderTime)[1]
wday(train$orderTime, label=T)[1]
train$wday_OrderTime <- wday(train$orderTime, label=T)
train$wday_couponsReceived <- wday(train$couponsReceived, label=T)
summary(train$wday_couponsReceived)
summary(train$wday_OrderTime)
train %>% ggplot(aes(x = wday_OrderTime)) + geom_bar()
train %>% ggplot(aes(x = wday_OrderTime)) + geom_bar(fill = wday_couponsReceived)
train %>% ggplot(aes(x = wday_OrderTime, fill = wday_couponsReceived)) + geom_bar()
rm(list=ls())
train <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_train.txt", sep="|")
train$orderTime <- ymd_hms(train$orderTime)
train$couponsReceived <- ymd_hms(train$couponsReceived)
train$time_diff = train$orderTime - train$couponsReceived
# create variable for difference in times (minutes)
train$minute_diff = as.numeric(train$time_diff) / 60
# create variable for day of the week, for both recieved and order time
train$wday_orderTime <- wday(train$orderTime, label=T)
train$wday_couponsReceived <- wday(train$couponsReceived, label=T)
# indicates that coupons may have different expiration times
qplot(min_diff, geom="histogram", colour=I("white"))
qplot(train$minute_diff, geom="histogram", colour=I("white"))
train %>% ggplot(aes(x = wday_orderTime, fill = wday_couponsReceived)) + geom_bar()
train %>% group_by(wday_orderTime, wday_couponsReceived) %>%
summarize(count = lenght(orderID))
train %>% group_by(wday_orderTime, wday_couponsReceived) %>%
summarize(count = length(orderID))
wday_sum <- train %>% group_by(wday_orderTime, wday_couponsReceived) %>%
summarize(count = length(orderID))
wday_sum
View(wday_sum)
wday_sum <- train %>% group_by(wday_couponsReceivedm, wday_orderTime) %>%
summarize(count = length(orderID))
wday_sum <- train %>% group_by(wday_couponsReceived, wday_orderTime) %>%
summarize(count = length(orderID))
View(wday_sum)
train$wday_orderTime[1]
train$wday_orderTime[1] == "Tues"
summary(subset(train, wday_orderTime == "Tues")$wday_couponsReceived)
summary(subset(train, wday_orderTime == "Tues")$minute_diff)
wday_sum <- train %>% group_by(wday_couponsReceived, wday_orderTime) %>%
summarize(count = length(orderID))
train %>% ggplot(aes(x = wday_couponsReceived, fill = wday_orderTime)) + geom_bar()
train$day_diff = as.numeric(train$minute_diff) / (60*24)
summary(train$day_diff)
train$day_diff = as.numeric(train$minute_diff) %/% (60*24)
summary(train$day_diff)
train$orderTime[1]
train$orderTime[1][1:5]
train$orderTime[1][1]
train$orderTime[1][2]
ymd(train$orderTime[1])
ceiling_date(train$orderTime[1], "day")
ceiling_date(train$orderTime[1], "day") - ceiling_date(train$couponsReceived[1], "day")
ceiling_date(train$orderTime[1], "day") - day(1)
ceiling_date(train$orderTime[1], "day") - days(1)
days(train$orderTime[1])
days(ceiling_date(train$orderTime[1], "day") - ceiling_date(train$couponsReceived[1], "day"))
days(ceiling_date(train$orderTime[156], "day") - ceiling_date(train$couponsReceived[156], "day"))
train$orderTime[1]
train$day_diff = ceiling_date(train$orderTime, "day") - ceiling_date(train$couponsReceived, "day")
summary(train$day_diff)
summary(as.numeric(train$day_diff))
train$day_diff = days(ceiling_date(train$orderTime, "day") - ceiling_date(train$couponsReceived, "day"))
summary(as.numeric(train$day_diff))
86400 / (60*60*24)
train$day_diff = (ceiling_date(train$orderTime, "day") - ceiling_date(train$couponsReceived, "day")) / (3600*24)
summary(as.numeric(train$day_diff))
summary(train$day_diff)
train %>% subset(wday_couponsReceived == "Sun") %>%
summaize(days = mean(as.numeric(day_diff)))
train %>% subset(wday_couponsReceived == "Sun") %>%
summarize(days = mean(as.numeric(day_diff)))
train %>% subset(wday_couponsReceived == "Sun") %>%
ggplot(aes(x = wday_orderTime, fill = as.factor(day_diff))) + geom_bar()
summary(factor(train$day_diff))
train %>% ggplot(aes(x = wday_couponsReceived, fill = factor(day_diff))) + geom_bar()
rm(list=ls())
train <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_class.txt", sep="|")
train$orderTime <- ymd_hms(train$orderTime)
train$couponsReceived <- ymd_hms(train$couponsReceived)
train$time_diff = train$orderTime - train$couponsReceived
# create variable for difference in times (minutes)
train$minute_diff = as.numeric(train$time_diff) / 60
train$day_diff = (ceiling_date(train$orderTime, "day") - ceiling_date(train$couponsReceived, "day")) / (3600*24)
# create variable for day of the week, for both recieved and order time
train$wday_orderTime <- wday(train$orderTime, label=T)
train$wday_couponsReceived <- wday(train$couponsReceived, label=T)
train %>% ggplot(aes(x = wday_orderTime, fill = wday_couponsReceived)) + geom_bar()
train %>% ggplot(aes(x = wday_couponsReceived, fill = wday_orderTime)) + geom_bar()
train %>% ggplot(aes(x = wday_couponsReceived, fill = factor(day_diff))) + geom_bar()
rm(list=ls())
train <- read.csv("/Users/epwalsh/GitHub/dmc2015/data/raw_data/DMC_2015_orders_train.txt", sep="|")
train$orderTime <- ymd_hms(train$orderTime)
train$couponsReceived <- ymd_hms(train$couponsReceived)
train$time_diff = train$orderTime - train$couponsReceived
# create variable for difference in times (minutes)
train$minute_diff = as.numeric(train$time_diff) / 60
train$day_diff = (ceiling_date(train$orderTime, "day") - ceiling_date(train$couponsReceived, "day")) / (3600*24)
# create variable for day of the week, for both recieved and order time
train$wday_orderTime <- wday(train$orderTime, label=T)
train$wday_couponsReceived <- wday(train$couponsReceived, label=T)
qplot(train$minute_diff, geom="histogram", colour=I("white"))
train %>% ggplot(aes(x = wday_orderTime, fill = wday_couponsReceived)) + geom_bar()
train %>% ggplot(aes(x = wday_couponsReceived, fill = wday_orderTime)) + geom_bar()
# every single person who spent their coupon on Tuesday had recieved their coupon on Tuesday, the same day
wday_sum <- train %>% group_by(wday_couponsReceived, wday_orderTime) %>%
summarize(count = length(orderID))
# most coupons are sent out on Tuesday
# all coupons expire before Tuesday
train %>% ggplot(aes(x = wday_couponsReceived, fill = factor(day_diff))) + geom_bar()
# ==================================================================
# coupon usage
# ==================================================================
# coupon 1 used the most, then coupon 2, then coupon 3
sum(train$coupon1Used)
sum(train$coupon2Used)
sum(train$coupon3Used)
# ==================================================================
# what the hell is the difference between basePrice, price, and reward?
# ==================================================================
summary(train$basePrice1+train$reward1-train$price1)
# still no idea
